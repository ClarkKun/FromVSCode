## 多线程

### 线程安全
当多个线程访问某个类时，这个类始终都能表现出正确的行为，那么就称这个类是线程安全的。正确性的含义是某个类的行为与其规范完全一致。  
#### 竞态条件
由于不恰当的执行时序而出现不正确的结果。如线程A和线程B的执行顺序不同时，会产生不同的结果。  
#### 内置锁
每个Java对象都可以用做一个实现同步的锁，线程会在进入同步代码块时自动获得锁，退出同步代码块时自动释放锁
##### 重入
当某个线程请求一个由其他线程持有的锁时，发出请求的线程就会阻塞。由于内置锁是可重入的，因此如果某个线程试图获得一个已经由它自己持有的锁，那么这个请求会成功。  
重入意味着获取锁的粒度是**线程**，而不是调用。
>重入的一种实现方法是：为每一个锁关联一个**获取数值**和一个**所有者线程**。  
当计数器为0时，这个锁被认定为没有被任何线程持有。  
当线程请求一个未被持有的锁时，JVM将几下锁的持有者，并将获取计数值置为1。  
如果当同一个线程再次获取这个锁，计数器值递增，当线程退出同步代码块时，计数器会相应的递减，当计数器为0时，锁被释放